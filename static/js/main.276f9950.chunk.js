(this.webpackJsonpflowchart_editor=this.webpackJsonpflowchart_editor||[]).push([[0],{76:function(e,t,n){"use strict";n.r(t);var i,r=n(0),o=n(24),a=n.n(o),c=n(16),s=n(27),d=n(48),h=n(17),l=n(13),u=n(9);function b(e){var t=e.graphRef,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current=new l.c({container:n.current,width:800,height:500,background:{color:"#F7FBFF"},interacting:{nodeMovable:!1}})}),[]),Object(u.jsx)(f,{ref:n})}var g,j,f=h.b.div(i||(i=Object(c.a)(["\n  border: 3px solid lightgrey;\n  border-radius: 10px;\n  box-shadow: 0 8px 5px rgba(0, 0, 0, 0.1);\n"]))),p=n(21),O=n(1),x=n(81),v=n(80);function y(e){var t=e.onDelete,n=e.children,i=Object(r.useRef)();return Object(u.jsxs)(m,{onMouseEnter:function(){i.current.style.display="block"},onMouseLeave:function(){i.current.style.display="none"},children:[n,Object(u.jsx)(k,{onClick:t,ref:i,icon:Object(u.jsx)(x.a,{})})]})}var w,m=h.b.div(g||(g=Object(c.a)(["\n  // border: 3px dashed purple; \n  width: 100%; \n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),k=Object(h.b)(v.a)(j||(j=Object(c.a)(["\n  position: absolute;\n  right: 0%;\n  transform: translateX(15px);\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  display: none;\n  transition: 100ms all ease-in-out;\n  border: 1px solid lightgrey;\n  background-color: white;\n  cursor: pointer;\n\n  &:hover {\n    color: #1890FF;\n    border-color: #1890FF;\n  }\n"]))),N=function e(t){if(Object(O.a)(this,e),this.width=250,this.height=70,t){var n=t.position(),i=n.x,r=n.y,o=t.size().width;this.x=i+(o-this.width)/2,this.y=r}else this.x=250,this.y=125;this.shape="react-shape",this.id="empty",this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){},children:Object(u.jsx)(F,{children:"\u8bf7\u5c06\u5de6\u4fa7\u670d\u52a1\u6216\u5173\u7cfb\u62d6\u5165\u6846\u5185"})})}},F=h.b.div(w||(w=Object(c.a)(["\n  width: 80%;\n  height: 100%;\n  border: 2px dashed grey;\n  font-size: small;\n  color: grey;\n  padding: 1px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),C={shape:"circle",width:50,height:50,attrs:{body:{stroke:"lightgrey",strokeWidth:1}}};var E,R,S=n(44),B=n(2);function L(e){var t=e.fillColor,n=e.strokeColor,i=e.strokeWidth,r=e.children;return Object(u.jsxs)(M,{children:[Object(u.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 111 44",children:Object(u.jsx)("g",{transform:"matrix(1,0,0,1,-386.202,-492.831)",children:Object(u.jsx)("g",{transform:"matrix(1,0,0,1.07965,3.97193,-33.3985)",children:Object(u.jsx)("path",{d:"M402.079,526.733L383.272,507.553L402.079,488.373L472.937,488.373L491.744,507.553L472.937,526.733L402.079,526.733Z",style:{fill:t,stroke:n,strokeWidth:i}})})})}),Object(u.jsx)(P,{children:r})]})}var W,I,z,D,M=h.b.div(E||(E=Object(c.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]))),P=h.b.span(R||(R=Object(c.a)(["\n\tposition: absolute;\n"]))),G=function e(t,n,i){Object(O.a)(this,e);var r=n.position(),o=r.x,a=r.y,c=n.size().width;this.shape="react-shape",this.width=210,this.height=50,this.x=o+(c-this.width)/2,this.y=a,this.id="polygonNode",this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){return i(e)},children:Object(u.jsx)(L,{fillColor:"none",strokeColor:"#1890FF",strokeWidth:"1px",children:t})})}},H=function e(t,n,i){Object(O.a)(this,e);var r=t.position(),o=r.x,a=r.y,c=t.size().width;this.shape="react-shape",this.width=220,this.height=35,this.x=o+(c-this.width)/2,this.y=a,this.id="serviceNode",this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){return i(e)},children:Object(u.jsx)(T,{children:n})})}},T=h.b.div(W||(W=Object(c.a)(["\n  width: 170px;\n  height: 35px;\n  background: white;\n  border: 1px solid #1890FF;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 30px;\n"]))),_=new(function(){function e(){Object(O.a)(this,e)}return Object(B.a)(e,[{key:"validateNode",value:function(e,t,n){this.graph=n;var i,r=Object(S.a)(n.getNodes());try{for(r.s();!(i=r.n()).done;){var o=i.value;if("empty"===o.id){var a=o.getBBox(),c=e.getBBox(),s=n.getIncomingEdges(o)[0],d=n.getOutgoingEdges(o)[0];if(c.isIntersectWithRect(a)&&0===o.getChildCount()){var h=e.getData(),l=h.title,u=h.group,b=null;return"service"===u?b=this.addServiceNode(o,l):"relation"===u&&(b=this.addParallelNode(o,b)),s.setTarget(b,l,b),d.setSource(b,l,b),n.removeNode(o),!1}}}}catch(g){r.e(g)}finally{r.f()}return!1}},{key:"addServiceNode",value:function(e,t){var n=this,i=new H(e,t,(function(e){return n.deleteServiceNode(e)}));return this.graph.addNode(i)}},{key:"addParallelNode",value:function(e){var t=this,n=new G("\u5e76\u884c\u5f00\u59cb",e,(function(e){return t.deleteParalleleNode(e)}));return this.graph.addNode(n)}},{key:"deleteServiceNode",value:function(e){var t=this.graph.addNode(new N);this.graph.getIncomingEdges(e)[0].setTarget(t),this.graph.getOutgoingEdges(e)[0].setSource(t),this.graph.removeNode(e)}},{key:"deleteParalleleNode",value:function(e){var t=this.graph.addNode(new N);this.graph.getIncomingEdges(e)[0].setTarget(t),this.graph.getOutgoingEdges(e)[0].setSource(t),this.graph.removeNode(e)}}]),e}()),J=n(3),A=n(4),X=function(){function e(){Object(O.a)(this,e),this.titles=[],this.groupName="",this.Component=Object(u.jsx)(u.Fragment,{})}return Object(B.a)(e,[{key:"init",value:function(e){this.nodes=[];for(var t=0;t<this.titles.length;t++){var n=this.titles[t],i=new d.a({width:170,height:35,data:{title:n,group:e},shape:"react-shape",component:Object(u.jsx)(this.Component,{children:n})});this.nodes.push(i)}}},{key:"load",value:function(e){e.load(this.nodes,this.groupName)}}]),e}(),Z=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).titles=["\u5e76\u884c\u8282\u70b9","\u6761\u4ef6\u8282\u70b9"],e.groupName="\u5173\u7cfb\u8282\u70b9",e.Component=q,e.init("relation"),e}return n}(X),q=h.b.div(I||(I=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  border: 2px dashed lightgrey;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 5px;\n"]))),K=function(e){Object(J.a)(n,e);var t=Object(A.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).titles=["\u4eba\u8138\u76f8\u5173\u80fd\u529b","text_lang","\u6587\u672c\u6821\u5bf9","IFOCR","\u6d4b\u8bd5\u81ea\u5b9a\u4e49\u7528\u4f8b"],e.groupName="\u8baf\u98de\u670d\u52a1",e.Component=Q,e.init("service"),e}return n}(X),Q=h.b.div(z||(z=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  border: 1px solid lightgrey;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 30px;\n"])));function U(e){var t=e.graphRef,n=e.stencilRef,i=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(t.current){var e=new l.a.Stencil({title:"Components",target:t.current,search:function(e,t){return-1!==e.shape.indexOf(t)},placeholder:"\u5168\u90e8\u670d\u52a1/\u8282\u70b9",notFoundText:"Not Found",collapsable:!0,stencilGraphWidth:230,stencilGraphHeight:100,layoutOptions:{columns:1,dx:0,dy:0,center:!0,columnWidth:200,rowHeight:50},stencilGraphOptions:{background:{color:"#ffffff"}},groups:[{name:"\u5173\u7cfb\u8282\u70b9",title:"\u5173\u7cfb\u8282\u70b9"},{name:"\u8baf\u98de\u670d\u52a1",title:"\u8baf\u98de\u670d\u52a1",graphHeight:300}],validateNode:function(e,n){return _.validateNode(e,n,t.current)}});n.current=e,i.current.appendChild(e.container),(new K).load(e),(new Z).load(e)}}),[]),Object(u.jsx)($,{ref:i})}var V,Y,$=h.b.div(D||(D=Object(c.a)(["\n  width: 230px;\n  border: 1px solid #f0f0f0;\n  position: relative; /* !!! */\n"])));function ee(){var e=Object(d.b)("GRAPH_1"),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){!function(e){var t=e.addNode(Object(p.a)(Object(p.a)({},C),{},{x:350,y:30,attrs:{label:{text:"\u5f00\u59cb"}}})),n=e.addNode(Object(p.a)(Object(p.a)({},C),{},{x:350,y:140,attrs:{label:{text:"\u7ed3\u675f"}}})),i=e.addNode(Object(p.a)(Object(p.a)({},C),{},{id:"plus",x:367,y:80,width:13,height:13,attrs:{label:{text:"+"}}})),r={attrs:{line:{stroke:"#1890FF",sourceMarker:"circle"}}};e.addEdge(Object(p.a)(Object(p.a)({},r),{},{source:i,target:n})),e.on("node:click",(function(o){if("plus"===o.node.id){var a=e.addNode(new N);n.translate(void 0,100),i.hide(),e.addEdge(Object(p.a)(Object(p.a)({},r),{},{source:t,target:a})),e.addEdge(Object(p.a)(Object(p.a)({},r),{},{source:a,target:n}))}}))}(o.current),i(o.current)}),[n]),Object(u.jsxs)(ne,{children:[Object(u.jsx)(te,{}),Object(u.jsx)(b,{graphRef:o}),Object(u.jsx)(U,{graphRef:o,stencilRef:a})]})}var te=Object(h.a)(V||(V=Object(c.a)(["\n  * {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n  }\n"]))),ne=h.b.div(Y||(Y=Object(c.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row-reverse;\n  width: 100%;\n"])));function ie(){return Object(u.jsx)(ee,{})}a.a.render(Object(u.jsx)(ie,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.276f9950.chunk.js.map