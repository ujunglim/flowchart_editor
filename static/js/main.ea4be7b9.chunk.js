(this.webpackJsonpflowchart_editor=this.webpackJsonpflowchart_editor||[]).push([[0],{76:function(e,t,n){"use strict";n.r(t);var i,r=n(0),a=n(24),o=n.n(a),s=n(17),d=n(27),c=n(48),h=n(18),l=n(13),u=n(9);function g(e){var t=e.graphRef,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current=new l.c({container:n.current,width:800,height:700,background:{color:"#F7FBFF"},interacting:{nodeMovable:!0}})}),[]),Object(u.jsx)(j,{ref:n})}var p,b,j=h.b.div(i||(i=Object(s.a)(["\n  border: 3px solid lightgrey;\n  border-radius: 10px;\n  box-shadow: 0 8px 5px rgba(0, 0, 0, 0.1);\n"]))),f=n(16),O=n(1),v=n(81),x=n(80);function y(e){var t=e.onDelete,n=e.children,i=Object(r.useRef)();return Object(u.jsxs)(w,{onMouseEnter:function(){i.current.style.display="block"},onMouseLeave:function(){i.current.style.display="none"},children:[n,Object(u.jsx)(N,{onClick:t,ref:i,icon:Object(u.jsx)(v.a,{})})]})}var m,w=h.b.div(p||(p=Object(s.a)(["\n  // border: 3px dashed purple; \n  width: 100%; \n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),N=Object(h.b)(x.a)(b||(b=Object(s.a)(["\n  position: absolute;\n  right: 0%;\n  transform: translateX(15px);\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  display: none;\n  transition: 100ms all ease-in-out;\n  border: 1px solid lightgrey;\n  background-color: white;\n  cursor: pointer;\n\n  &:hover {\n    color: #1890FF;\n    border-color: #1890FF;\n  }\n"]))),k=function e(){Object(O.a)(this,e),this.width=250,this.height=70,this.x=250,this.y=125,this.shape="react-shape",this.id="empty",this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){},children:Object(u.jsx)(C,{children:"\u8bf7\u5c06\u5de6\u4fa7\u670d\u52a1\u6216\u5173\u7cfb\u62d6\u5165\u6846\u5185"})})}},E=function e(t,n){Object(O.a)(this,e),this.width=250,this.height=70,this.x=t,this.y=250,this.shape="react-shape",this.id=n,this.component=function(e){return Object(u.jsx)(y,{children:Object(u.jsx)(C,{children:"\u8bf7\u5c06\u5de6\u4fa7\u670d\u52a1\u62d6\u5165\u6846\u5185"})})}},C=h.b.div(m||(m=Object(s.a)(["\n  width: 80%;\n  height: 100%;\n  border: 2px dashed grey;\n  font-size: small;\n  color: grey;\n  padding: 1px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),F={shape:"circle",width:50,height:50,attrs:{body:{stroke:"lightgrey",strokeWidth:1}}};var S,R,B=n(44),P=n(2);function W(e){var t=e.fillColor,n=e.strokeColor,i=e.strokeWidth,r=e.children;return Object(u.jsxs)(z,{children:[Object(u.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 111 44",children:Object(u.jsx)("g",{transform:"matrix(1,0,0,1,-386.202,-492.831)",children:Object(u.jsx)("g",{transform:"matrix(1,0,0,1.07965,3.97193,-33.3985)",children:Object(u.jsx)("path",{d:"M402.079,526.733L383.272,507.553L402.079,488.373L472.937,488.373L491.744,507.553L472.937,526.733L402.079,526.733Z",style:{fill:t,stroke:n,strokeWidth:i}})})})}),Object(u.jsx)(A,{children:r})]})}var D,I,L,M,z=h.b.div(S||(S=Object(s.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]))),A=h.b.span(R||(R=Object(s.a)(["\n\tposition: absolute;\n"]))),T=function e(t,n){Object(O.a)(this,e);var i=t.position(),r=i.x,a=i.y,o=t.size().width;this.width=210,this.height=50,this.x=r+(o-this.width)/2,this.y=a,this.shape="react-shape",this.id="polygonStartNode",this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){return n(e)},children:Object(u.jsx)(W,{fillColor:"none",strokeColor:"#1890FF",strokeWidth:"1px",children:"\u5e76\u884c\u5f00\u59cb"})})}},G=function e(t){Object(O.a)(this,e);var n=t.position(),i=n.x,r=n.y,a=t.size().width;this.width=210,this.height=50,this.x=i+(a-this.width)/2,this.y=r+270,this.shape="react-shape",this.id="polygonFinishNode",this.component=Object(u.jsx)(W,{fillColor:"none",strokeColor:"#1890FF",strokeWidth:"1px",children:"\u5e76\u884c\u7ed3\u675f"})},H=function e(t,n,i){Object(O.a)(this,e);var r=t.position(),a=r.x,o=r.y,s=t.size().width;this.shape="react-shape",this.width=220,this.height=35,this.x=a+(s-this.width)/2,this.y=o,this.id="".concat(t.id,"Service"),this.component=function(e){return Object(u.jsx)(y,{onDelete:function(){return i(e)},children:Object(u.jsx)(_,{children:n})})}},_=h.b.div(D||(D=Object(s.a)(["\n  width: 170px;\n  height: 35px;\n  background: white;\n  border: 1px solid #1890FF;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 30px;\n"]))),J=new(function(){function e(){Object(O.a)(this,e)}return Object(P.a)(e,[{key:"validateNode",value:function(e,t,n){this.graph=n;var i,r=Object(B.a)(n.getNodes());try{for(r.s();!(i=r.n()).done;){var a=i.value;if("empty"===a.id){var o=a.getBBox();if(e.getBBox().isIntersectWithRect(o)&&0===a.getChildCount()){var s=e.getData(),d=s.title,c=s.group;return"service"===c?this.addServiceNode(a,d):"relation"===c&&this.addParallelNode(a),n.removeNode(a),!1}}else if("leftEmpty"===a.id||"rightEmpty"===a.id){var h=a.getBBox();if(e.getBBox().isIntersectWithRect(h)&&0===a.getChildCount()){var l=e.getData(),u=l.title,g=l.group;return"service"===g?(this.addServiceNode(a,u),n.removeNode(a)):"relation"===g&&alert("Only Service Node is available at here."),!1}}}}catch(p){r.e(p)}finally{r.f()}return!1}},{key:"addServiceNode",value:function(e,t){var n=this,i=new H(e,t,(function(e){return n.deleteServiceNode(e)})),r=this.graph.addNode(i),a=this.graph.getIncomingEdges(e)[0],o=this.graph.getOutgoingEdges(e)[0];a.setTarget(r),o.setSource(r),"empty"!==e.id&&this.graph.trigger("AddParallelService",r)}},{key:"addParallelNode",value:function(e){var t=this,n=this.graph.addNode({}),i=new T(e,(function(e){return t.deleteParalleleNode(e,d,n)})),r=new G(e),a=this.graph.addNode(i),o=this.graph.addNode(new E(120,"leftEmpty")),s=this.graph.addNode(new E(380,"rightEmpty")),d=this.graph.addNode(r),c=this.graph.getIncomingEdges(e)[0],h=this.graph.getOutgoingEdges(e)[0];c.setTarget(a),h.setSource(d);var l={router:"orth",attrs:{line:{stroke:"#1890FF",sourceMarker:"circle"}}},u=this.graph.addEdge(Object(f.a)(Object(f.a)({},l),{},{source:a,target:o,vertices:[{x:300,y:220}]})),g=this.graph.addEdge(Object(f.a)(Object(f.a)({},l),{},{source:a,target:s,vertices:[{x:400,y:220}]})),p=this.graph.addEdge(Object(f.a)(Object(f.a)({},l),{},{source:o,target:d,vertices:[{x:300,y:350}]})),b=this.graph.addEdge(Object(f.a)(Object(f.a)({},l),{},{source:s,target:d,vertices:[{x:400,y:350}]}));n.addChild(a),n.addChild(o),n.addChild(s),n.addChild(d),n.addChild(u),n.addChild(g),n.addChild(p),n.addChild(b),this.graph.on("AddParallelService",(function(e){n.addChild(e)})),this.graph.trigger("AddParallel")}},{key:"deleteServiceNode",value:function(e){var t=e.id,n=null;"emptyService"===t?n=this.graph.addNode(new k):"leftEmptyService"===t?n=this.graph.addNode(new E(120,"leftEmpty")):"rightEmptyService"===t&&(n=this.graph.addNode(new E(380,"rightEmpty"))),this.graph.getIncomingEdges(e)[0].setTarget(n),this.graph.getOutgoingEdges(e)[0].setSource(n),this.graph.removeNode(e)}},{key:"deleteParalleleNode",value:function(e,t,n){var i=this.graph.addNode(new k);this.graph.getIncomingEdges(e)[0].setTarget(i),this.graph.getOutgoingEdges(t)[0].setSource(i),this.graph.removeNode(n),this.graph.trigger("DeleteParallel")}}]),e}()),X=n(3),Z=n(4),q=function(){function e(){Object(O.a)(this,e),this.titles=[],this.groupName="",this.Component=Object(u.jsx)(u.Fragment,{})}return Object(P.a)(e,[{key:"init",value:function(e){this.nodes=[];for(var t=0;t<this.titles.length;t++){var n=this.titles[t],i=new c.a({width:170,height:35,data:{title:n,group:e},shape:"react-shape",component:Object(u.jsx)(this.Component,{children:n})});this.nodes.push(i)}}},{key:"load",value:function(e){e.load(this.nodes,this.groupName)}}]),e}(),K=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).titles=["\u5e76\u884c\u8282\u70b9","\u6761\u4ef6\u8282\u70b9"],e.groupName="\u5173\u7cfb\u8282\u70b9",e.Component=Q,e.init("relation"),e}return n}(q),Q=h.b.div(I||(I=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  border: 2px dashed lightgrey;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 5px;\n"]))),U=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).titles=["\u4eba\u8138\u76f8\u5173\u80fd\u529b","text_lang","\u6587\u672c\u6821\u5bf9","IFOCR","\u6d4b\u8bd5\u81ea\u5b9a\u4e49\u7528\u4f8b"],e.groupName="\u8baf\u98de\u670d\u52a1",e.Component=V,e.init("service"),e}return n}(q),V=h.b.div(L||(L=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  border: 1px solid lightgrey;\n  color: black;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 30px;\n"])));function Y(e){var t=e.graphRef,n=e.stencilRef,i=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(t.current){var e=new l.a.Stencil({title:"Components",target:t.current,search:function(e,t){return-1!==e.shape.indexOf(t)},placeholder:"\u5168\u90e8\u670d\u52a1/\u8282\u70b9",notFoundText:"Not Found",collapsable:!0,stencilGraphWidth:230,stencilGraphHeight:100,layoutOptions:{columns:1,dx:0,dy:0,center:!0,columnWidth:200,rowHeight:50},stencilGraphOptions:{background:{color:"#ffffff"}},groups:[{name:"\u5173\u7cfb\u8282\u70b9",title:"\u5173\u7cfb\u8282\u70b9"},{name:"\u8baf\u98de\u670d\u52a1",title:"\u8baf\u98de\u670d\u52a1",graphHeight:300}],validateNode:function(e,n){return J.validateNode(e,n,t.current)}});n.current=e,i.current.appendChild(e.container),(new U).load(e),(new K).load(e)}}),[]),Object(u.jsx)(te,{ref:i})}var $,ee,te=h.b.div(M||(M=Object(s.a)(["\n  width: 230px;\n  border: 1px solid #f0f0f0;\n  position: relative; /* !!! */\n"])));function ne(){var e=Object(c.b)("GRAPH_1"),t=Object(d.a)(e,2),n=t[0],i=t[1],a=Object(r.useRef)(null),o=Object(r.useRef)(null);return Object(r.useEffect)((function(){!function(e){var t=e.addNode(Object(f.a)(Object(f.a)({},F),{},{x:350,y:30,attrs:{label:{text:"\u5f00\u59cb"}}})),n=e.addNode(Object(f.a)(Object(f.a)({},F),{},{x:350,y:140,attrs:{label:{text:"\u7ed3\u675f"}}}));e.on("AddParallel",(function(){n.translate(void 0,250)})),e.on("DeleteParallel",(function(){n.translate(void 0,-250)}));var i=e.addNode(Object(f.a)(Object(f.a)({},F),{},{id:"plus",x:367,y:80,width:13,height:13,attrs:{label:{text:"+"}}})),r={attrs:{line:{stroke:"#1890FF",sourceMarker:"circle"}}};e.addEdge(Object(f.a)(Object(f.a)({},r),{},{source:i,target:n})),e.on("node:click",(function(a){if("plus"===a.node.id){var o=e.addNode(new k);n.translate(void 0,100),i.hide(),e.addEdge(Object(f.a)(Object(f.a)({},r),{},{source:t,target:o})),e.addEdge(Object(f.a)(Object(f.a)({},r),{},{source:o,target:n}))}}))}(a.current),i(a.current)}),[n]),Object(u.jsxs)(re,{children:[Object(u.jsx)(ie,{}),Object(u.jsx)(g,{graphRef:a}),Object(u.jsx)(Y,{graphRef:a,stencilRef:o})]})}var ie=Object(h.a)($||($=Object(s.a)(["\n  * {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n  }\n"]))),re=h.b.div(ee||(ee=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row-reverse;\n  width: 100%;\n"])));function ae(){return Object(u.jsx)(ne,{})}o.a.render(Object(u.jsx)(ae,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.ea4be7b9.chunk.js.map